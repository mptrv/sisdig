%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
% teoria.sty
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
% Configurações comuns para documentos associados à teoria das disciplinas
% envolvidas.
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

\ProvidesPackage{teoria}

\usepackage{indentfirst}

% Para personalização das "seções" do documento.
\usepackage{titlesec}

%Formas de onda digitais.
\usepackage{tikz-timing}
\usetikztiminglibrary{clockarrows}
\usetikztiminglibrary{overlays}

% Unidades do SI.
\usepackage{siunitx}

% Frações bonitas.
%   (Para os casos em que não é carregado automaticamente.)
\usepackage{nicefrac}

% Alteração de contagem do tipo "mestre-escravo".
%   Ver http://www.tex.ac.uk/FAQ-addtoreset.html.
\usepackage{chngcntr}

% Cálculos.
\usepackage{calc}

%Laço "for".
\usepackage{forloop}

% Informações sobre o leiaute da página.
%   Modo de uso elementar: dentro de flutuante de figura, chamar
%      \currentpage
%      \pagedesign
%\usepackage{layouts}

% Fração do total da altura do texto para alocação de flutuantes na parte inferior da página.
\renewcommand{\bottomfraction}{0.5}

% Enumeração por letras dos alfabeto.
% Enumeração por letras dos alfabeto.
\newcommand{\alfaenum}{\renewcommand{\labelenumi}{\alph{enumi})}\renewcommand{\theenumi}{\labelenumi}}
\newcommand{\Alfaenum}{\renewcommand{\labelenumi}{\Alph{enumi})}\renewcommand{\theenumi}{\labelenumi}}

% Espaço vertical geral (\espv) e para tabelas (\strutp) - em tabelas, \baselineskip = 0.
% Nota: há o comando pré-definido \strut.
%   Ref.: http://en.wikibooks.org/wiki/LaTeX/Rules_and_Struts
\newlength{\tabbaselineskip}
\setlength{\tabbaselineskip}{\baselineskip}
\newcommand{\espv}[1][4]{\rule[-.3\baselineskip]{0pt}{#1\baselineskip}}
%\newcommand{\espv}[1][4]{\rule[#1ex]{0pt}{0pt}} % Obsoleto.
\newcommand{\strutp}[1][4]{\rule[-.3\tabbaselineskip]{0pt}{#1\tabbaselineskip}}
%\newcommand{\strutp}[1]{\rule[-0.3\baselineskip]{0pt}{#1}} % Obsoleto.

% Forma alternativa para alterar o espaçamento entre linhas de tabela.
\newcommand{\esptab}[1][1.5]{\renewcommand\arraystretch{#1}}

% Contador e comando para questão.
\newcounter{cquestao}
\newcommand{\questao}[2][x]{%
  \stepcounter{cquestao}\bigskip\noindent{$\mathbf{\left(\thecquestao\right)}$}%
}

% Personalização dos capítulos.
%   Ref.: http://tex.stackexchange.com/questions/94729/how-to-customize-chapter-heading-style

% Nome de capítulo padrão.
\newcounter{contexp}
\newcommand{\titulocap}[2][true]{%
\setcounter{contexp}{1}
\titleformat{\chapter}[display]
  {\normalsize \huge}%
  {\centering\large\textsc{#2}\ifthenelse{\equal{#1}{true}}{\hspace{1ex}\thecontexp}{}}%
  {10 pt}%
  {\centering\LARGE}[\thispagestyle{fancy}\stepcounter{contexp}\setcounter{cquestao}{0}]%
}

% Nomes de capítulos.
\newcommand{\tituloativ}{\titulocap{Atividade}}
\newcommand{\tituloexp}{\titulocap{Experiência}}
\newcommand{\tituloexpextra}{\titulocap{Experiência Extra}}
\newcommand{\tituloproj}{\titulocap[false]{Projeto Semestral}}
\newcommand{\titulominiproj}{\titulocap[false]{Mini Projeto}}

% Espaços à esquerda, acima e abaixo do capítulo.
\titlespacing*{\chapter}{0pt}{5pt}{40pt}

% Personalização das numeração dos elementos.
%   Numeração das seções.
\renewcommand{\thesection}{\arabic{section}}
%   Numeração das figuras.
\renewcommand{\thefigure}{\arabic{figure}}
%  Numeração das tabelas.
\renewcommand{\thetable}{\arabic{table}}

% Personalização para unidades SI (por siunitx}.
\sisetup{copy-decimal-marker,input-decimal-markers={,.kM},quotient-mode=fraction,fraction-function=\nicefrac}


% Correção do altura do cabeçalho.
%   Necessário pois alguns pacotes, como 'pdfpages' ou o que oferece os comandos "oval",
%   parece que reconfiguram a altura do cabeçalho.
\setlength{\headheight}{34pt}

% Caixa de respostas.
%  (A linha em branco é importante para separar a caixa do texto que a antecede.)
\newcommand{\caixaresp}[1][10]{%   
   \noindent %
   \begin{tabular}{|>{\centering}p{1\linewidth}|}
      \hline 
      \espv[#1]\tabularnewline
      \hline 
   \end{tabular}
}
